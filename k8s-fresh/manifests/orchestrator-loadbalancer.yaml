apiVersion: v1
kind: Service
metadata:
  name: orchestrator-external
  namespace: voice-agent-fresh
  annotations:
    service.beta.kubernetes.io/google-load-balancer-type: "External"
    service.beta.kubernetes.io/google-load-balancer-ssl-certificates: "ssl-certificates"
    service.beta.kubernetes.io/google-load-balancer-ssl-ports: "443"
    service.beta.kubernetes.io/google-load-balancer-backend-config: '{"default": {"healthCheck": {"checkIntervalSec": 30, "timeoutSec": 5, "healthyThreshold": 1, "unhealthyThreshold": 3, "type": "HTTPS", "requestPath": "/health"}}}'
spec:
  selector:
    app: orchestrator
  ports:
  - name: https
    port: 443
    targetPort: 8001
    protocol: TCP
  - name: http
    port: 80
    targetPort: 8001
    protocol: TCP
  type: LoadBalancer 